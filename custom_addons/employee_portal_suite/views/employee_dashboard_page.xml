<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <template id="employee_portal_dashboard" name="Employee Dashboard">
        <t t-call="employee_portal_suite.employee_portal_layout">
            <style>
            .dashboard-link {
                text-decoration: none !important;
            }

            .dashboard-card {
                background: linear-gradient(180deg, #ffffff 0%, #fafafa 100%);
                border: 1px solid rgba(0,0,0,0.04);

                border-radius: 24px;
                padding: 18px;
                height: 140px;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                box-shadow: 0 8px 25px rgba(0,0,0,0.05);
                transition: all 0.25s ease;
            }

            .dashboard-card:hover {
                transform: translateY(-6px);
                box-shadow: 0 18px 40px rgba(0,0,0,0.08);
            }
            .dashboard-card {
                transition: transform 0.25s cubic-bezier(.34,1.56,.64,1),
                            box-shadow 0.25s ease;
            }


            .card-top {
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .card-icon {
                width: 42px;
                height: 42px;
                border-radius: 14px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 18px;
            }

            .bg-warning-soft {
                background: rgba(245, 158, 11, 0.12);
                color: #F59E0B;
            }

            .card-title {
                font-weight: 600;
                font-size: 14px;
                color: #374151;
            }

            .card-number {
                font-size: 32px;
                font-weight: 700;
                letter-spacing: -1px;
                color: #111827;
            }

            .card-bottom {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .badge-pulse {
                width: 10px;
                height: 10px;
                background: #F59E0B;
                border-radius: 50%;
                animation: pulse 1.5s infinite;
            }

            @keyframes pulse {
                0% { box-shadow: 0 0 0 0 rgba(245,158,11,0.6); }
                70% { box-shadow: 0 0 0 10px rgba(245,158,11,0); }
                100% { box-shadow: 0 0 0 0 rgba(245,158,11,0); }
            }

            .bg-primary-soft {
                background: rgba(113, 75, 103, 0.1);
                color: #714B67;
            }

            .bg-indigo-soft {
                background: rgba(79, 70, 229, 0.12);
                color: #4F46E5;
            }

            .bg-success-soft {
                background: rgba(16, 185, 129, 0.12);
                color: #10B981;
            }

            .bg-dark-soft {
                background: rgba(31, 41, 55, 0.12);
                color: #1F2937;
            }

            .badge-pulse.bg-success {
                background: #10B981;
            }
            .dashboard-hero {
                background: linear-gradient(135deg, #6366F1 0%, #4F46E5 100%);
                color: white;
                border-radius: 26px;
                padding: 22px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                box-shadow: 0 20px 40px rgba(79,70,229,0.25);
            }

            .hero-title {
                font-size: 18px;
                font-weight: 700;
                letter-spacing: -0.02em;
            }

            .hero-sub {
                font-size: 13px;
                opacity: 0.9;
                margin-top: 4px;
            }

            .hero-stat {
                text-align: right;
            }

            .hero-stat-number {
                font-size: 28px;
                font-weight: 800;
                display: block;
            }

            .hero-stat-label {
                font-size: 11px;
                opacity: 0.8;
            }
            .section-title {
                font-weight: 700;
                font-size: 14px;
                letter-spacing: -0.02em;
                color: var(--text-primary);
            }

            .recent-activity {
                background: var(--surface);
                border-radius: 22px;
                padding: 18px;
                box-shadow: var(--shadow-sm);
            }

            .activity-card {
                display: flex;
                align-items: center;
                gap: 12px;
                padding: 10px 0;
                border-bottom: 1px solid var(--border-light);
            }

            .activity-card:last-child {
                border-bottom: none;
            }

            .activity-card i {
                width: 36px;
                height: 36px;
                background: rgba(79,70,229,0.1);
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: var(--app-primary);
                font-size: 14px;
            }

            .activity-title {
                font-size: 13px;
                font-weight: 600;
            }

            .activity-time {
                font-size: 11px;
                color: var(--text-muted);
            }



            </style>
            <div class="row mt-4 g-3">
                <div class="dashboard-hero mb-4">

                <div class="hero-left">
                    <div class="hero-title">Your Workspace</div>
                    <div class="hero-sub">
                        You have 
                        <strong><t t-esc="employee_pending_count + material_pending_count"/></strong>
                        pending actions today.
                    </div>
                </div>

                <div class="hero-right">
                    <div class="hero-stat">
                        <span class="hero-stat-number">
                            <t t-esc="my_request_count + my_material_count"/>
                        </span>
                        <span class="hero-stat-label">Total Requests</span>
                    </div>
                </div>

            </div>

                <!-- EMPLOYEE REQUESTS -->
                <div class="col-6 col-md-6">
                    <a href="/my/employee/requests" class="dashboard-link">
                        <div class="dashboard-card">
                            <div class="card-top">
                                <div class="card-icon bg-primary-soft">
                                    <i class="fa fa-file-text-o"></i>
                                </div>
                                <span class="card-title">Requests</span>
                            </div>
                            <div class="card-bottom">
                                <span class="card-number">
                                    <t t-esc="my_request_count"/>
                                </span>
                            </div>
                        </div>
                    </a>
                </div>


                <!-- MATERIAL REQUESTS -->
                <div class="col-6 col-md-6">
                    <a href="/my/employee/material" class="dashboard-link">
                        <div class="dashboard-card">
                            <div class="card-top">
                                <div class="card-icon bg-indigo-soft">
                                    <i class="fa fa-cubes"></i>
                                </div>
                                <span class="card-title">Materials</span>
                            </div>
                            <div class="card-bottom">
                                <span class="card-number">
                                    <t t-esc="my_material_count"/>
                                </span>
                            </div>
                        </div>
                    </a>
                </div>


                <!-- EMPLOYEE APPROVALS -->
                <t t-if="
                    request.env.user.has_group('employee_portal_suite.group_employee_portal_manager')
                    or request.env.user.has_group('employee_portal_suite.group_employee_portal_hr')
                    or request.env.user.has_group('employee_portal_suite.group_employee_portal_finance')
                    or request.env.user.has_group('employee_portal_suite.group_employee_portal_ceo')
                ">
                    <div class="col-6 col-md-6">
                        <a href="/my/employee/approvals" class="dashboard-link">
                            <div class="dashboard-card">
                                <div class="card-top">
                                    <div class="card-icon bg-success-soft">
                                        <i class="fa fa-user"></i>
                                    </div>
                                    <span class="card-title">Approvals</span>
                                </div>
                                <div class="card-bottom">
                                    <span class="card-number">
                                        <t t-esc="employee_pending_count"/>
                                    </span>
                                    <t t-if="employee_pending_count &gt; 0">
                                        <span class="badge-pulse bg-success"></span>
                                    </t>
                                </div>
                            </div>
                        </a>
                    </div>
                </t>


                <!-- MATERIAL APPROVALS -->
                <t t-if="
                    request.env.user.has_group('employee_portal_suite.group_mr_purchase_rep')
                    or request.env.user.has_group('employee_portal_suite.group_mr_store_manager')
                    or request.env.user.has_group('employee_portal_suite.group_mr_project_manager')
                    or request.env.user.has_group('employee_portal_suite.group_mr_projects_director')
                    or request.env.user.has_group('employee_portal_suite.group_employee_portal_ceo')
                ">
                    <div class="col-6 col-md-6">
                        <a href="/my/employee/material/approvals" class="dashboard-link">
                            <div class="dashboard-card">
                                <div class="card-top">
                                    <div class="card-icon bg-warning-soft">
                                        <i class="fa fa-check-circle-o"></i>
                                    </div>
                                    <span class="card-title">Material Approvals</span>
                                </div>
                                <div class="card-bottom">
                                    <span class="card-number">
                                        <t t-esc="material_pending_count"/>
                                    </span>
                                    <t t-if="material_pending_count &gt; 0">
                                        <span class="badge-pulse"></span>
                                    </t>
                                </div>
                            </div>
                        </a>
                    </div>
                </t>


                <!-- SIGNATURES -->
                <div class="col-6 col-md-6">
                    <a href="/my/employee/sign" class="dashboard-link">
                        <div class="dashboard-card">
                            <div class="card-top">
                                <div class="card-icon bg-dark-soft">
                                    <i class="fa fa-pencil-square-o"></i>
                                </div>
                                <span class="card-title">Signatures</span>
                            </div>
                            <div class="card-bottom">
                                <span class="card-number">
                                    <t t-esc="pending_sign_count"/>
                                </span>
                            </div>
                        </div>
                    </a>
                </div>

            </div>
            <div class="recent-activity mt-4">

                <div class="section-title mb-2">Recent Activity</div>

                <div class="activity-card">
                    <i class="fa fa-file-text-o"></i>
                    <div>
                        <div class="activity-title">Material Request MR-2024-008</div>
                        <div class="activity-time">Submitted 2 hours ago</div>
                    </div>
                </div>

                <div class="activity-card">
                    <i class="fa fa-check-circle-o text-success"></i>
                    <div>
                        <div class="activity-title">Employee Request Approved</div>
                        <div class="activity-time">Yesterday</div>
                    </div>
                </div>

            </div>




        </t>
    </template>

</odoo>
