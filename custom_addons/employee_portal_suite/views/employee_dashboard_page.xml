<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <template id="employee_portal_dashboard" name="Employee Dashboard">
        <t t-call="employee_portal_suite.employee_portal_layout">
            <style>
           /* ================================================================
            DASHBOARD LINK (remove underline everywhere)
            ================================================================ */

            .dashboard-link,
            .dashboard-link:hover,
            .dashboard-link:focus,
            .dashboard-link:active {
                text-decoration: none !important;
                color: inherit !important;
            }


            /* ================================================================
            DASHBOARD CARD – PREMIUM INTERACTIVE
            ================================================================ */

            .dashboard-card {
                background: linear-gradient(180deg, #ffffff 0%, #fafafa 100%);
                border: 1px solid rgba(0,0,0,0.04);

                border-radius: 24px;
                padding: 20px;
                height: 140px;

                display: flex;
                flex-direction: column;
                justify-content: space-between;

                box-shadow: 0 8px 25px rgba(0,0,0,0.05);

                position: relative;
                overflow: hidden;

                transition:
                    transform 0.25s cubic-bezier(.34,1.56,.64,1),
                    box-shadow 0.25s ease,
                    background 0.25s ease;
            }

            /* Soft gradient glow overlay */
            .dashboard-card::before {
                content: '';
                position: absolute;
                inset: 0;
                background: linear-gradient(
                    135deg,
                    rgba(79,70,229,0.08),
                    transparent 60%
                );
                opacity: 0;
                transition: opacity 0.25s ease;
                pointer-events: none;
            }

            /* Hover (Desktop) */
            .dashboard-card:hover {
                transform: translateY(-6px);
                box-shadow: 0 18px 45px rgba(26,27,46,0.12);
            }

            .dashboard-card:hover::before {
                opacity: 1;
            }

            /* Press (Mobile) */
            .dashboard-card:active {
                transform: scale(0.97);
                box-shadow: 0 6px 18px rgba(0,0,0,0.06);
            }


            /* ================================================================
            CARD CONTENT
            ================================================================ */

            .card-top {
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .card-icon {
                width: 42px;
                height: 42px;
                border-radius: 14px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 18px;

                transition: transform 0.25s cubic-bezier(.34,1.56,.64,1);
            }

            /* Icon micro interaction */
            .dashboard-card:hover .card-icon {
                transform: scale(1.08);
            }

            .card-title {
                font-weight: 600;
                font-size: 14px;
                color: #374151;
            }

            .card-number {
                font-size: 32px;
                font-weight: 700;
                letter-spacing: -1px;
                color: #111827;
            }

            .card-bottom {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }


            /* ================================================================
            BADGES
            ================================================================ */

            .badge-pulse {
                width: 10px;
                height: 10px;
                background: #F59E0B;
                border-radius: 50%;
                animation: pulse 1.5s infinite;
            }

            .badge-pulse.bg-success {
                background: #10B981;
            }

            @keyframes pulse {
                0% { box-shadow: 0 0 0 0 rgba(245,158,11,0.6); }
                70% { box-shadow: 0 0 0 10px rgba(245,158,11,0); }
                100% { box-shadow: 0 0 0 0 rgba(245,158,11,0); }
            }


            /* ================================================================
            SOFT ICON COLORS
            ================================================================ */

            .bg-warning-soft {
                background: rgba(245,158,11,0.12);
                color: #F59E0B;
            }

            .bg-primary-soft {
                background: rgba(113,75,103,0.10);
                color: #714B67;
            }

            .bg-indigo-soft {
                background: rgba(79,70,229,0.12);
                color: #4F46E5;
            }

            .bg-success-soft {
                background: rgba(16,185,129,0.12);
                color: #10B981;
            }

            .bg-dark-soft {
                background: rgba(31,41,55,0.12);
                color: #1F2937;
            }


            /* ================================================================
            HERO – PREMIUM BUT CLEAN
            ================================================================ */

            .dashboard-hero {
                background: linear-gradient(135deg, #6366F1 0%, #4F46E5 100%);
                color: white;
                border-radius: 26px;
                padding: 24px;

                display: flex;
                justify-content: space-between;
                align-items: center;

                box-shadow: 0 20px 40px rgba(79,70,229,0.25);

                position: relative;
                overflow: hidden;
            }

            /* Subtle inner glow */
            .dashboard-hero::before {
                content: '';
                position: absolute;
                top: -40%;
                right: -20%;
                width: 200px;
                height: 200px;
                background: radial-gradient(circle, rgba(255,255,255,0.25), transparent 70%);
                opacity: 0.4;
                pointer-events: none;
            }

            .hero-title {
                font-size: 18px;
                font-weight: 700;
                letter-spacing: -0.02em;
            }

            .hero-sub {
                font-size: 13px;
                opacity: 0.9;
                margin-top: 4px;
            }

            .hero-stat {
                text-align: right;
            }

            .hero-stat-number {
                font-size: 28px;
                font-weight: 800;
                display: block;
            }

            .hero-stat-label {
                font-size: 11px;
                opacity: 0.85;
            }


            /* ================================================================
            SECTION TITLE
            ================================================================ */

            .section-title {
                font-weight: 700;
                font-size: 14px;
                letter-spacing: -0.02em;
                color: var(--text-primary);
            }


            /* ================================================================
            RECENT ACTIVITY - PREMIUM INTERACTIVE STYLE
            ================================================================ */

            .recent-activity {
                background: var(--surface);
                border-radius: 22px;
                padding: 18px;
                box-shadow: var(--shadow-sm);
            }

            /* Clickable Activity Card */
            .activity-card {
                display: flex;
                align-items: center;
                gap: 14px;
                padding: 12px 14px;
                border-radius: 16px;

                text-decoration: none !important;
                color: inherit !important;

                position: relative;
                cursor: pointer;

                transition:
                    background 0.2s ease,
                    transform 0.12s ease,
                    box-shadow 0.2s ease;
            }

            /* Remove underline in all states */
            .activity-card,
            .activity-card:hover,
            .activity-card:focus,
            .activity-card:active {
                text-decoration: none !important;
                color: inherit !important;
            }

            /* Space between cards */
            .activity-card + .activity-card {
                margin-top: 8px;
            }

            /* Hover (Desktop) */
            .activity-card:hover {
                background: rgba(79,70,229,0.06);
                box-shadow: 0 8px 22px rgba(79,70,229,0.08);
                transform: translateY(-2px);
            }

            /* Active (Mobile press feel) */
            .activity-card:active {
                transform: scale(0.97);
                background: rgba(79,70,229,0.12);
            }

            /* Left accent indicator */
            .activity-card::before {
                content: '';
                position: absolute;
                left: 0;
                top: 10px;
                bottom: 10px;
                width: 3px;
                border-radius: 4px;
                background: var(--app-primary);
                opacity: 0;
                transition: opacity 0.2s ease;
            }

            .activity-card:hover::before {
                opacity: 1;
            }

            /* Icon */
            .activity-card i {
                width: 36px;
                height: 36px;
                background: rgba(79,70,229,0.1);
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: var(--app-primary);
                font-size: 14px;
                flex-shrink: 0;
            }

            /* Content */
            .activity-content {
                flex: 1;
            }

            .activity-title {
                font-size: 13px;
                font-weight: 600;
            }

            .activity-time {
                font-size: 11px;
                color: var(--text-muted);
            }

            /* Status badge */
            .activity-status {
                font-size: 10px;
                padding: 5px 10px;
                border-radius: 20px;
                font-weight: 600;
                background: rgba(0,0,0,0.05);
                color: var(--text-secondary);
            }



            </style>
            <div class="row mt-4 g-3">
                <div class="dashboard-hero mb-4">

                <div class="hero-left">
                    <div class="hero-title">Your Workspace</div>
                    <div class="hero-sub">
                        You have 
                        <strong><t t-esc="employee_pending_count + material_pending_count + pending_sign_count"/></strong>
                        pending actions today.
                    </div>
                </div>

                <div class="hero-right">
                    <div class="hero-stat">
                        <span class="hero-stat-number">
                            <t t-esc="my_request_count + my_material_count"/>
                        </span>
                        <span class="hero-stat-label">Total Requests</span>
                    </div>
                </div>

            </div>

                <!-- EMPLOYEE REQUESTS -->
                <div class="col-6 col-md-6">
                    <a href="/my/employee/requests" class="dashboard-link">
                        <div class="dashboard-card">
                            <div class="card-top">
                                <div class="card-icon bg-primary-soft">
                                    <i class="fa fa-file-text-o"></i>
                                </div>
                                <span class="card-title">Requests</span>
                            </div>
                            <div class="card-bottom">
                                <span class="card-number">
                                    <t t-esc="my_request_count"/>
                                </span>
                            </div>
                        </div>
                    </a>
                </div>


                <!-- MATERIAL REQUESTS -->
                <div class="col-6 col-md-6">
                    <a href="/my/employee/material" class="dashboard-link">
                        <div class="dashboard-card">
                            <div class="card-top">
                                <div class="card-icon bg-indigo-soft">
                                    <i class="fa fa-cubes"></i>
                                </div>
                                <span class="card-title">Materials</span>
                            </div>
                            <div class="card-bottom">
                                <span class="card-number">
                                    <t t-esc="my_material_count"/>
                                </span>
                            </div>
                        </div>
                    </a>
                </div>


                <!-- EMPLOYEE APPROVALS -->
                <t t-if="
                    request.env.user.has_group('employee_portal_suite.group_employee_portal_manager')
                    or request.env.user.has_group('employee_portal_suite.group_employee_portal_hr')
                    or request.env.user.has_group('employee_portal_suite.group_employee_portal_finance')
                    or request.env.user.has_group('employee_portal_suite.group_employee_portal_ceo')
                ">
                    <div class="col-6 col-md-6">
                        <a href="/my/employee/approvals" class="dashboard-link">
                            <div class="dashboard-card">
                                <div class="card-top">
                                    <div class="card-icon bg-success-soft">
                                        <i class="fa fa-user"></i>
                                    </div>
                                    <span class="card-title">ER Approvals</span>
                                </div>
                                <div class="card-bottom">
                                    <span class="card-number">
                                        <t t-esc="employee_pending_count"/>
                                    </span>
                                    <t t-if="employee_pending_count &gt; 0">
                                        <span class="badge-pulse bg-success"></span>
                                    </t>
                                </div>
                            </div>
                        </a>
                    </div>
                </t>


                <!-- MATERIAL APPROVALS -->
                <t t-if="
                    request.env.user.has_group('employee_portal_suite.group_mr_purchase_rep')
                    or request.env.user.has_group('employee_portal_suite.group_mr_store_manager')
                    or request.env.user.has_group('employee_portal_suite.group_mr_project_manager')
                    or request.env.user.has_group('employee_portal_suite.group_mr_projects_director')
                    or request.env.user.has_group('employee_portal_suite.group_employee_portal_ceo')
                ">
                    <div class="col-6 col-md-6">
                        <a href="/my/employee/material/approvals" class="dashboard-link">
                            <div class="dashboard-card">
                                <div class="card-top">
                                    <div class="card-icon bg-warning-soft">
                                        <i class="fa fa-check-circle-o"></i>
                                    </div>
                                    <span class="card-title">MR Approvals</span>
                                </div>
                                <div class="card-bottom">
                                    <span class="card-number">
                                        <t t-esc="material_pending_count"/>
                                    </span>
                                    <t t-if="material_pending_count &gt; 0">
                                        <span class="badge-pulse"></span>
                                    </t>
                                </div>
                            </div>
                        </a>
                    </div>
                </t>


                <!-- SIGNATURES -->
                <div class="col-6 col-md-6">
                    <a href="/my/employee/sign" class="dashboard-link">
                        <div class="dashboard-card">
                            <div class="card-top">
                                <div class="card-icon bg-dark-soft">
                                    <i class="fa fa-pencil-square-o"></i>
                                </div>
                                <span class="card-title">Signatures</span>
                            </div>
                            <div class="card-bottom">
                                <span class="card-number">
                                    <t t-esc="pending_sign_count"/>
                                </span>
                            </div>
                        </div>
                    </a>
                </div>

            </div>
           <div class="recent-activity mt-4">

            <div class="section-title mb-3">Recent Activity</div>

            <t t-if="recent_activities">
                <t t-foreach="recent_activities" t-as="act">

                    <a t-att-href="
                            '/my/employee/requests/%s' % act.id
                            if act._name == 'employee.request'
                            else '/my/employee/material/%s' % act.id
                        "
                    class="activity-card">

                        <!-- ICON -->
                        <div class="activity-icon">
                            <t t-if="act._name == 'employee.request'">
                                <i class="fa fa-file-text-o"></i>
                            </t>
                            <t t-if="act._name == 'material.request'">
                                <i class="fa fa-cubes"></i>
                            </t>
                        </div>

                        <!-- CONTENT -->
                        <div class="activity-content">

                            <div class="activity-title">
                                <t t-if="act._name == 'employee.request'">
                                    Employee Request
                                </t>
                                <t t-if="act._name == 'material.request'">
                                    Material Request
                                </t>
                                <strong><t t-esc="act.name"/></strong>
                            </div>

                            <div class="activity-time">
                                <t t-esc="act.create_date.strftime('%d %b %Y - %H:%M')"/>
                            </div>

                        </div>

                        <!-- STATUS -->
                        <div class="activity-status"
                            t-att-class="'activity-status state-' + act.state">
                            <t t-esc="act.state.replace('_',' ').title()"/>
                        </div>

                    </a>

                </t>
            </t>

            <t t-if="not recent_activities">
                <div class="text-muted small">
                    No recent activity yet.
                </div>
            </t>

        </div>






        </t>
    </template>

</odoo>
